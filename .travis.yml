language: java
jdk:
  - openjdk11

branches:
  only:
    - development
env:
  - IMGNAME=java    

services:
  - docker

script:
  - mvn compile

after_success:
  - echo "successful"
  - docker build -t ${IMGNAME} .
  - docker login -u ${username} -p ${password}
  - docker tag  ${IMGNAME}:latest myjava/my-java:1.0
  - docker push myjava/my-java:1.0

notifications:
  email:
    recipients:
      - rishirai760@gmail.com
    on_success: always
    on_failure: always
