language: java
jdk:
  - openjdk11

branches:
  only:
    - development
env:
  - IMGNAME=java    

services:
  - docker
job:
 include:
   - stage: Build
     script:
      - mvn compile

after_success:
  - echo "successful"
  - docker build -t ${IMGNAME} .
  - docker login -u ${username} -p ${password}
  - docker images
  - docker tag  ${IMGNAME}:latest my-java:1.0
  - docker push my-java:1.0

notifications:
  email:
    recipients:
      - rishirai760@gmail.com
    on_success: always
    on_failure: always
